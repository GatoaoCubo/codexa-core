{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Chapters Generator Input",
  "description": "Input schema for 64_chapters_generator_HOP.md",
  "version": "1.0.0",
  "type": "object",

  "required": ["video_duration"],

  "properties": {
    "video_duration": {
      "type": "string",
      "description": "Video duration in MM:SS or HH:MM:SS format",
      "pattern": "^([0-9]{1,2}:)?[0-9]{1,2}:[0-9]{2}$",
      "examples": ["5:30", "12:45", "1:30:00"]
    },

    "input_mode": {
      "type": "string",
      "enum": ["transcript", "script", "outline"],
      "default": "outline",
      "description": "Source type for chapter generation"
    },

    "transcript": {
      "type": "string",
      "description": "Full video transcript (for input_mode: transcript)",
      "minLength": 100
    },

    "script": {
      "type": "object",
      "description": "Script from Stage 2 (for input_mode: script)",
      "properties": {
        "segments": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {"type": "string"},
              "narration": {"type": "string"},
              "duration_seconds": {"type": "integer"}
            }
          }
        }
      }
    },

    "outline": {
      "type": "array",
      "description": "Content outline with sections (for input_mode: outline)",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "description": "Estimated timestamp",
            "pattern": "^[0-9]{1,2}:[0-9]{2}$"
          },
          "section": {
            "type": "string",
            "description": "Section title or description"
          }
        }
      }
    },

    "video_brief": {
      "type": "object",
      "description": "Video brief for context",
      "properties": {
        "topic": {"type": "string"},
        "content_type": {
          "type": "string",
          "enum": ["tutorial", "review", "educational", "promotional", "vlog"]
        },
        "language": {
          "type": "string",
          "default": "pt-BR"
        }
      }
    },

    "description_optimizer_output": {
      "type": "object",
      "description": "Output from 61_description_optimizer (if chapters already exist)",
      "properties": {
        "timestamps": {
          "type": "object",
          "properties": {
            "chapters": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "timestamp": {"type": "string"},
                  "title": {"type": "string"}
                }
              }
            }
          }
        }
      }
    },

    "preferences": {
      "type": "object",
      "properties": {
        "max_chapters": {
          "type": "integer",
          "minimum": 3,
          "maximum": 15,
          "default": 10
        },
        "min_chapter_gap_seconds": {
          "type": "integer",
          "minimum": 10,
          "default": 30
        },
        "use_action_verbs": {
          "type": "boolean",
          "default": true
        },
        "include_intro_outro": {
          "type": "boolean",
          "default": true
        }
      }
    }
  },

  "examples": [
    {
      "video_duration": "12:34",
      "input_mode": "outline",
      "outline": [
        {"timestamp": "00:00", "section": "Introdução"},
        {"timestamp": "02:00", "section": "Conceitos básicos"},
        {"timestamp": "06:00", "section": "Demonstração prática"},
        {"timestamp": "10:00", "section": "Conclusão"}
      ],
      "video_brief": {
        "topic": "Python para iniciantes",
        "content_type": "tutorial",
        "language": "pt-BR"
      }
    }
  ]
}
